---
// ImageBackground.astro - Reusable image background component
// Supports background images with opacity control

export interface Props {
  src: string | { src: string } | any; // Accepts string paths or imported image objects
  alt?: string; // For accessibility, though image is decorative
  opacity?: number; // 0-1, default 1
  className?: string;
  objectFit?: 'cover' | 'contain' | 'fill' | 'none' | 'scale-down';
  objectPosition?: string; // e.g., 'center', 'top', 'bottom', '50% 50%'
}

const {
  src: srcProp,
  alt = '',
  opacity = 1,
  className = '',
  objectFit = 'cover',
  objectPosition = 'center'
} = Astro.props;

// Handle both string paths and imported image objects
const imageSrc = typeof srcProp === 'string' ? srcProp : (srcProp?.src || srcProp);
---

<div class={`image-background ${className}`} style={`opacity: ${opacity};`}>
  <img
    class="image-background__image"
    src={imageSrc}
    alt={alt}
    style={`object-fit: ${objectFit}; object-position: ${objectPosition};`}
    aria-hidden="true"
    loading="lazy"
  />
</div>

<style>
  .image-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    overflow: hidden;
    pointer-events: none;
  }

  .image-background__image {
    width: 100%;
    height: 100%;
  }

  /* Ensure section wrapper can contain the image */
  :global(.section-wrapper:has(.image-background)) {
    position: relative;
  }
</style>

